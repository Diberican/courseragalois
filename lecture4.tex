%% -*- coding:utf-8 -*-
\chapter{Tensor product. Structure of finite K-algebras}
This is a digression on commutative algebra. We introduce and study
the notion of tensor product of modules over a ring. We prove a
structure theorem for finite algebras over a field (a version of the
well-known "Chinese remainder theorem").


\section{Definition of tensor product}

\subsection{Summary for previous lectures}
We considered finite \nameref{def:fextension1} $L$ i.e
$\left[L:K\right] < \infty$. We also saw that if
$L$ is generated by a finite number of \nameref{def:degsepelem}s 
$\alpha_1, \dots, \alpha_r$ then the number of
\nameref{def:homomorphism}s over $K$ from $L$ to $\bar{K}$ denoted by
$\left|Hom_K\left(L, \bar{K}\right)\right|$ is equal to
$\left[L:K\right]$. In general
\[
\left[L:K\right]_{sep} = 
\left|Hom_K\left(L, \bar{K}\right)\right| \le
\left[L:K\right].
\]

For $L = K\left(\alpha\right)$ it is clear because the number of
homomorphisms is equal to the number of roots of the
\nameref{def:minpolynomial} $P_{min}\left(\alpha, K\right)$. In
general one can use induction and multiplicativity of the degree
$\left[L:K\right]$ and number of homomorphisms (see theorem
\nameref{thm:lec3_3}). Thus  separable extension was exactly an
extension  which had the right number of homomorphisms into the
algebraic closure.

Our next goal is to characterize the separability in the terms of
tensor product.

\subsection{Tensor product}

\begin{definition}[Tensor product]
  Let $A$ is a ring, $N$, $M$ are $A$-\nameref{def:module}s. The
  tensor product $M \otimes_A N$
  is another $A$-\nameref{def:module} together with an
  $A$-bilinear map $\phi: M \times N \to M \otimes_A N$ which has
  ``\nameref{def:universalproperty}'' defined below
  \label{def:tensorproduct}
\end{definition}

\begin{definition}[Universal property]
  $A$-bilinear map $\phi: M \times N \to M \otimes_A N$ has
  ``universal property'' if
  $\forall P$ - $A$-\nameref{def:module} and
  for $A$-bilinear $f: M \times N \to P$ (
  i.e.
  \(
  \forall m, f_m:
  \begin{array}{c}
    N \to P \\
    n \to f(m,n)
    \end{array}
  \)
  and
  \(
  \forall n, f_n:
  \begin{array}{c}
    M \to P \\
    m \to f(m,n)
    \end{array}
  \)
  are \nameref{def:homomorphism}s of $A$-modules
  ), then
  $\exists! \tilde{f}$ - homomorphism of $A$-modules such that
  $f = \tilde{f} \circ \phi$
  \footnote{
    That means that the diagram commutes
  }

  \begin{tikzpicture}[description/.style={fill=white,inner sep=2pt}]
    \matrix (m) [matrix of math nodes, row sep=3em,
      column sep=2.5em, text height=1.5ex, text depth=0.25ex]
            { M \times N & & P \\
              & M \otimes_A N & \\ };
            %\draw[double,double distance=5pt] (m-1-1) – (m-1-3);
            \path[->]
            (m-1-1) edge node[auto] {$ f $} (m-1-3)
            edge node[auto] {$ \phi $} (m-2-2)
            (m-2-2) edge node[auto] {$ \tilde{f} $} (m-1-3);
  \end{tikzpicture}
  \label{def:universalproperty}
\end{definition}

The property characterize the pair
$\left(\phi, M \otimes N\right)$.
Really if have another pair
$\left(\overline{\phi}, \overline{M \otimes N}\right)$
like this one then by definition we have mutually inverse
homomorphisms of $A$-modules between them

\begin{lemma}[About uniqueness of object defined by universal
    property]
  \footnote{
    It is out of the lecture video and can be considered as an
    explanation for the claim about having mutually inverse
    homomorphisms of $A$-modules
  }
  If we have two objects $\left(\phi, M \otimes N\right)$
  and $\left(\overline{\phi},\overline{M \otimes N}\right)$
  which both satisfies \nameref{def:universalproperty} than there is
  an unique \nameref{def:isomorphism} between them: 
  \[
  \left(\phi, M \otimes N\right) \cong \left(\overline{\phi},
  \overline{M \otimes N}\right)
  \]
\begin{proof}
Let $P = \overline{M \otimes N}$ and $f =
\overline{\phi}$. In 
the case we can consider the following diagram

\begin{tikzpicture}[description/.style={fill=white,inner sep=2pt}]
  \matrix (m) [matrix of math nodes, row sep=3em,
    column sep=2.5em, text height=1.5ex, text depth=0.25ex]
          { & & M \otimes_A N & \\
            M \times N & & \overline{M \otimes_A N} \\
            & & M \otimes_A N & \\ };
          %\draw[double,double distance=5pt] (m-1-1) – (m-1-3);
          \path[->]
          (m-2-1) edge node[auto] {$ \phi $} (m-1-3)
          (m-1-3) edge node[auto] {$ g = \tilde{\overline{\phi}} $} (m-2-3)
          (m-2-1) edge node[auto] {$ \overline{\phi} $} (m-2-3)
          (m-2-1) edge node[auto] {$ \phi $} (m-3-3)
          (m-2-3) edge node[auto] {$ \bar{g} = \tilde{\phi} $} (m-3-3);
\end{tikzpicture}

Thus we have that there are 2 homomorphisms
$g :  M \otimes_A N \to \overline{ M \otimes_A N}$
and
$\bar{g} :  \overline{M \otimes_A N} \to M \otimes_A N$ moreover
$g \circ \bar{g} = id_{M \otimes_A N}$
\footnote{
  We have that both $g$ and $\bar{g}$ are linear. They also declared
  to be unique. They combination is also linear and ??? unique. The
  $id_{M \otimes_A N}$ satisfies the linear property and from
  uniqueness there is no any others
}
i.e. $\bar{g} = g^{-1}$ i.e. we have an
\nameref{def:isomorphism} and the isomorphism is unique as soon as the
function $g$ is unique due the \nameref{def:universalproperty}.

We just prove an isomorphism existence between
$M \otimes N$ and $\overline{M \otimes N}$ but the tensor product is
characterized not only by the module $M \otimes N$
but also a bilinear map $\phi$ for that we can have the following:
setting $P = \overline{M \otimes N}$ we
can get that $\bar{\phi} = \tilde{\bar{\phi}} \circ \phi$ is
determined by the unique
relation $\phi \to \bar{\phi}$ as soon as
$\tilde{\bar{\phi}}$ is unique. Analogues one can get unique relation
$\bar{\phi} \to \phi$.
\end{proof}
\label{lem:universalpropertyuniqueness}
\end{lemma}

The uniqueness does not mean existence and we should proof that such
object exists.
\begin{lemma}[About tensor product existence]
  Tensor product defined via \nameref{def:universalproperty} exists
  \begin{proof}
    Lets consider $\mathcal{E}$ the maps (functions) from
    $M \times N$ to $A$ as sets which are $0$ almost everywhere
    (i.e. outside of a finite set). For example we can consider delta
    functions:
    \[
    \delta_{m,n} : M \times N \to A
    \]
    such that
    \begin{eqnarray}
      \delta_{m,n}(m,n) = 1,
      \nonumber \\
      \delta_{m,n}(m',n') = 0 \mbox{ if } (m,n) \ne (m',n')
      \nonumber 
    \end{eqnarray}
    Then $\mathcal{E}$ is a A-\nameref{def:freemodule} with basis
    $\delta_{m,n}$. Thus we have a map of sets $M \times N \to
    \mathcal{E}$ such that $(m,n) \to \delta_{m,n}$ which is not bilinear
    but we can make it bilinear by means of changing $\mathcal{E}$.
    
    Let $\mathcal{F} \subset \mathcal{E}$ a submodule generated by
    $\delta_{m+m',n} - \delta_{m,n} - \delta_{m',n}$,
    $\delta_{m,n+n'} - \delta_{m,n} - \delta_{m,n'}$,
    $\delta_{am,n} - a\delta_{m,n}$,
    $\delta_{m,an} - a\delta_{m,n}$.
    \footnote{
      The basis is chosen to be a bilinear $\mod \mathcal{F}$, for instance
      $\delta_{m+m',n} = \delta_{m,n} + \delta_{m',n} \mod \mathcal{F}$
    }
    
    It can be shown that $M \times N \to \mathcal{E}/\mathcal{F}$ is
    bilinear
    \footnote{
      Follows from the basis choice
    }
    and has the desired \nameref{def:universalproperty}.

    Really lets we have the following bilinear map:
    $f: M \times N \to P$. Then we can consider the following map
    $f': \mathcal{E} \to P$ that sends $\delta_{m,n}$ to
    $f(n,m)$. Using the fact that $f$ is bilinear we can get
    \begin{eqnarray}
      f'(\delta_{m+m',n}) = f'(\delta_{m,n}) + f'(\delta_{m',n}),
      \nonumber \\
      f'(\delta_{m,n+n'}) = f'(\delta_{m,n}) + f'(\delta_{m,n'}),
      \nonumber \\
      f'(\delta_{am,n}) =  a f'(\delta_{m,n}),
      \nonumber \\
      f'(\delta_{m,an}) = a f'(\delta_{m,n})
      \nonumber
    \end{eqnarray}
    with the $f'$ linearity we have
    \begin{eqnarray}
      f'(\delta_{m+m',n}) = f'(\delta_{m,n} + \delta_{m',n}),
      \nonumber \\
      f'(\delta_{m,n+n'}) = f'(\delta_{m,n} + \delta_{m,n'}),
      \nonumber \\
      f'(\delta_{am,n}) =  a f'(\delta_{m,n}),
      \nonumber \\
      f'(\delta_{m,an}) = a f'(\delta_{m,n})
      \nonumber
    \end{eqnarray}

    The kernel $\ker f' = \mathcal{F}$ thus if we want to have a
    homomorphism to $P$ we have to replace $\mathcal{E}$ with
    $\mathcal{E}/\mathcal{F}$ that is also denoted by
    $M \otimes_A N$. In the case we will replace $f'$ with
    $\tilde{f}\left(\delta_{m,n} \mod \mathcal{F}\right) = f(m,n)$. As
    soon as the images for the basis is fixed the mapping is unique.
  \end{proof}
  \label{lem:tensorproductexistence}
\end{lemma}

We will denote $\phi\left(m,n\right) = \delta_{m,n} \mod \mathcal{F}$ as
$m \otimes n$. I.e our tensor product can be considered as the 
$\left(\otimes, M \otimes_A N\right)$ pair.


\begin{remark}
  Wrong idea is to define $M \otimes_A N$
  as a set of $m \otimes n$. I.e.
  $M \otimes_A N \neq \{m \otimes n\}$.
\end{remark}
The $M \otimes_A N$ is generated by $m \otimes n$ i.e.
$\forall x \in M \otimes_A N$ we have $x = \sum_{i = 1}^k m_i \otimes n_i$

\section{Tensor product of modules}

\subsection{Advantages of the universal property}
Now, you can ask  why haven't I just defined the tensor product by
this construction? Why am I talking of this universal property? 
And the answer is because it is easier to prove things this way. 
So advantages of the universal property is as follows: that the proofs
become easy.

\subsection{Several examples of universal property usage}

\begin{example}[Commutativity proof]
  We want to prove that
  \[
  M \otimes_A N \cong N \otimes_A M
  \]

  We have the following bilinear map:
  $M \times N \to N \otimes_A M$ for which the pair
  $(m,n)$ is mapped to $n \otimes m$. Thus from
  \nameref{def:universalproperty} we have that there is a linear map
  (homomorphism)
  $\alpha: M \otimes_A N \to N \otimes_A M$. With the same
  construction we can get also and the inverse map that sends
  $N \otimes_A M$ to $M \otimes_A N$.
\end{example}

Also
\[
A \otimes_A M \cong M
\]

If we have that $M$ is generated by $e_1, e_2, \dots$ and
$N$ is generated by $\epsilon_1, \epsilon_2, \dots$ than
$M \otimes_A N$ is generated by pairs $e_i \otimes \epsilon_j$. It's
obvious.

More complex fact is the following
\begin{proposition}
  Let $M$ and $N$ are \nameref{def:freemodule}s
  with corresponding basises $e_1, e_2, \dots, e_n$ and
  $\epsilon_1, \epsilon_2, \dots, \epsilon_m$ than
  $M \otimes_A N$ is also free module with basis $e_i \otimes
  \epsilon_j$ where $1 \le i \le n$ and
  $1 \le j \le m$.
  \begin{proof}
    Lets define
    $f_{i_0,j_0}: M \times N \to A$ as a map that sends
    $\left(\sum a_i e_i, \sum b_j \epsilon_j\right)$ to
    $a_{j_0} b_{j_0}$. It's bilinear
    \footnote{
      for example
      $\left(\sum (a_i + a_i') e_i, \sum b_j \epsilon_j\right)$ is
      sent to  $(a_{j_0} + a_{j_0}') b_{j_0}$.
    }
    so it factors through the tensor product
    $\tilde{f}_{i_0, j_0} : M \otimes_A N \to A$. The map
    $\tilde{f}_{i_0, j_0}$ sends $e_{i_0} \otimes \epsilon_{j_0}$ to 1
    and all others to 0. So if
    \[
    \sum \alpha_{ij} e_i \otimes \epsilon_j = 0
    \]
    then applying $\tilde{f}_{i_0, j_0}$ for all indices one can get
    $\forall i,j: \alpha_{ij} = 0$.
    \footnote{
      because $\tilde{f}$ should be linear.
    }
  \end{proof}
  \label{prop:lec4_1}
\end{proposition}

In particular for the \nameref{def:vectorspace} the tensor product is
defined in the same way (as just proved in the proposition
\ref{prop:lec4_1}): the testnsor product of 2 vector spaces with
basises $e_1, e_2, \dots, e_n$ and
$\epsilon_1, \epsilon_2, \dots, \epsilon_m$ is another vector space
with the following basis $e_i \otimes \epsilon_j$ i.e. the definition
does not take into consideration the \nameref{def:universalproperty}.

\begin{proposition}[Associative]
  \[
  \left(M_1 \otimes_A M_2\right) \otimes_A M_3
  \cong
  M_1 \otimes_A \left(M_2 \otimes_A M_3\right)
  \]
  \begin{proof}
    There is just a scratch of the proof.
    Introduce
    $M_1 \otimes_A M_2 \otimes_A M_3$
    as a universal object for 3-linear maps and show that 2 considered
    parts are isomorphic each other.
  \end{proof}
  \label{prop:lec4_Associative}
\end{proposition}

\section{Base change}

Let $A$ is a \nameref{def:ring} and $B$ is $A$-algebra. Let also $M$
is an $A$-\nameref{def:module} and $N$ is $B$-module.

I can of course make $N$ into $A$-module (just forgetting the
additional $A$-algebra structure). But we can also make $B$-module of
$M$, that is not a trivial thing, by considering $B \otimes_A M$.
We can introduce $B$-module structure on $B \otimes_A M$ by
\footnote{
  I.e. we introduced $B$-algebra operations for objects from
  $B \otimes_A M$. See also definition \ref{def:kalgebra}.
}
\[
b \cdot \left(b' \otimes m \right) = \left( b \cdot b' \right) \otimes m 
\]

\begin{example}[The complexification of a real vector space]
  We can ``make'' $\mathbb{R}^{2n}$ from $\mathbb{C}^n$ by forgetting
  the complex structure.
  \footnote{
    In the case we have ring $A = \mathbb{R}$ and $B = \mathbb{C}$ -
    $A$ algebra. $A$ - module is the following vector space
    $M = \mathbb{R}^{2n}$ and $B$ - module is $N = \mathbb{C}^n$.
  }
  The $\mathbb{C}^n$ has the following basis $e_1, \dots, e_n$.
  The $\mathbb{R}^{2n}$ has the following one
  $e_1, \dots, e_n, i e_1, \dots, i e_n$. Now we forgot about
  multiplication rules for $i = \sqrt{-1}$ and denote $i e_i$ as
  $v_i$. In the case the basis for $\mathbb{R}^{2n}$ is the following
  one: $e_1, \dots, e_n, v_1, \dots, v_n$.

  But we can also do the following constructions
  \[
  \mathbb{R}^n \rightarrow
  \mathbb{C}^n = \mathbb{C} \otimes \mathbb{R}^n \rightarrow
  \mathbb{R}^{2n}
  \]
  for the $\mathbb{C}^n$ basis we have
  $1 \otimes e_1, \dots, 1 \otimes e_n$ and for $\mathbb{R}^{2n}$ -
  $1 \otimes e_1, \dots, 1 \otimes e_n, i \otimes e_1, \dots, i
  \otimes e_n$.
\end{example}

\section{Examples. Tensor product of algebras}

\section{Relatively prime ideals. Chinese remainder theorem}

\section{Structure of finite algebras over a field. Examples}
